%!TEX root = ../thesis.tex
\chapter{Introduction}
\label{ch:introduction}

Simulations play an increasingly important role in robotics research and development \parencite{afzal2020study}. 
They offer a cost-effective and efficient means to investigate, analyze and optimize the behavior of robots even before they are physically implemented \parencite{de2019analysis}. 
Notably, various companies involved in the field of robotics use simulation technology extensively in the development process of their systems, such as Boston Dynamics \parencite{BostonDynamicsSimulation}, Tesla Inc. \parencite{TeslaAiDay2022} or Kuka Robotics \parencite{KukaSim}.
Due to their high degree of mobility and versatility hexapods are of particular interest in robotics. 
When compared to wheeled or bipedal architectures, the flexibility six legs provide enable these robots to easily overcome challenging terrain and complex obstacles \parencite{barai2013smart, atifystructure}.
Hexapods, in contrast to bipedal architectures, are also statically stable, meaning they are able to stay in an upright position with little to no active control \parencite{azayev2020blind}. 
This makes them particularly interesting for navigating landscapes inaccessible to other robotic systems or hazardous to humans, examples of possible applications being search and rescue, low-impact agricultural industry or even extraterrestrial exploration \parencite{trotta2022walking, billah2008walking}.

\section{Problem}
The process of developing software for these hexapods can be a challenging and by no means trivial task. %is a challenging and by no means trivial task.
While maintaining balance for instance, is evidently easier for this architecture than it is for the aforementioned bipedal robots, coordinating the many legs during movement still poses a major challenge \parencite{azayev2020blind,schilling2013walknet}.

When working on a real-world system as complex as a hexapod robot, the problems of validating the implemented software and efficiently analysing its performance have to be considered.
Attempting to base the software verification process solely on real robotic hardware can prove difficult due to several factors.
First and foremost, there exists a heavy reliance on the physical hardware, which, given its often considerable cost, commonly leads to a scarcity of available robots \parencite{collins2021review, marvel2014collaborative}.
If experimental software is directly tested on one of these robots, it might fall over or otherwise damage itself if the software does not perform well.
This can lead to numerous and time-consuming repairs as well as additional costs, all of which are undesirably.
Another problem with solely testing on hardware is that the real-world lacks reliable reproducibility.
If the software contains edge cases that only occur under very specific configurations, these can prove extremely difficult to reproduce in the real world  \parencite{choi2021use, hutchinsonanalysis}.
For a test setup to be exactly the same as the next is near impossible.
The real world is intrinsically more complex than a simulation and even a small deviation in between two tests can result in a completely different outcome.

A third, more subtle problem can be the lack of a practical, inexpensive and safe testing ground.
If, for example, developing a rover destined for exploration on Mars, testing cannot be carried out under Martian conditions \parencite{choi2021use}.
It would be impractical, if not completely impossible to create a real-world testing ground capable of featuring Mars-like soil, atmosphere, gravity and all other important properties simultaneously.

%In our opinion, the MATLAB Simulink modeling and simulation environment from the MathWorks company is particularly interesting for implementing such a model.
%Due to its diagram-like development interface based on functional blocks and a large number of so-called "toolboxes" from a wide variety of application areas, Simulink enables the generation of modular and clearly arranged systems, which can be simulated immediately.

%Besonders interessant für die Umsetzung eines solchen Modells ist unserer Meinung nach die Modellierungs- und Simulationsumgebung MATLAB Simulink des Unternehmens MathWorks.
%Durch die auf funktionalen Blöcken basierende, diagrammartige Entwicklungsoberfläche und eine Vielzahl sog. "Toolboxes" aus unterschiedlichsten Anwendungsgebieten ermöglicht Simulink die Erzeugung modularer und übersichtlicher Systeme, welche sofort simuliert werden können.
%In den letzten Jahren wurden mehrere wissenschaftliche Arbeiten veröffentlicht, die sich mit der Simulation eines Hexapods in Simulink beschäftigen(siehe z.B. \cite{tanaka2019development, barai2013smart, atify2019propelling}), sodass sich schließen lässt, dass die Vorteile der simulationsgestützten Entwicklung durchaus wahrgenommen und genutzt werden.
%Jedoch gibt es unseren Wissens nach derzeit kein öffentlich verfügbares, modernes Simulink-Modell auf dem weitere Forschung aufbauen könnte.


%Um die Erforschung von Controllern zu Bewegungssteuerung möglichst effektiv vorantreiben zu können ist es wichtig, leistungsstarke Simulationssoftware in den Entwicklungsprozess einzubeziehen.
%Es wird ein wesentlich  kleinschrittiger Prozess ermöglicht, da jede noch so kleine Änderung direkt und ohne großen Mehraufwand getestet werden kann.

%Da auf Grund von Materialkosten, Konstruktions- und Wartungsaufwand reale Roboter oft diejenige Komponente eines Projektes sind, welche beim Erproben der neu entwickelten Software der größte zeitliche "bottleneck" sind, stellt das direkte Erproben komplexer Aufgaben in der realen Welt(z.B. Navigation auf unebenem Gelände)  ein Risiko dar.

%Zur Entwicklung des Controllers und der Simulation desselben auf einem Hexapod-Modell wird in dieser Arbeit das MATLAB Tool Simulink in Verbindung mit der Simulation-Toolbox SimScape verwendet werden.
%Simulink ist eine weit verbreitete Software zur Entwicklung und Simulation von komplexen dynamischen Systemen.
%Durch die Popularität der Software ist mit der Zeit eine Vielzahl von domänenspezifischen Bibliotheken(Toolboxes) entstanden, welche die einfache Modellierung verschiedenster Modelle ermöglichen.
%Der block-basierte Ansatz von Simulink ist dabei besonders hervorzuheben, da es dieser ermöglicht sehr modulare Systeme zu erzeugen, wodurch bei Anpassungen nur einzelne Subsysteme ausgetauscht werden, anstatt Änderungen am gesamten Modell vornehmen zu müssen.


\section{Objective}
%BENEFITS OF SIMULATION TOOLS:
Considering the aforementioned problems, it is no surprise that simulation software plays an important role in robotics research, as simulations offer effective solutions to many of these issues \parencite{afzal2020study}.
To begin with, they provide inexpensive and efficient ways to validate the performance of a robotic system.
The risk of damaging expensive hardware during testing is mitigated completely, time-consuming tasks such as uploading the modified software onto the robot and setting up the test environment manually do not have to be carried out.
Additionally, given the same initial state, a deterministic simulation will always produce the same results, offering the researcher complete reproducibility over occurring problems \parencite{choi2021use}.
Simulations can, if enough computational resources are available, run faster than real-time, can be parallelized and do not have to be physically reset by a human operator.
This makes them especially interesting when planning on using learning-based approaches \parencite{collins2021review}.
In summary, simulations provide a more cost-effective, safer, and dependable alternative to conducting direct tests on the target hardware.

In order to support and accelerate our research on hexapod robots, we aim to capitalize on these benefits.
We seek an environment which offers a wide range of tools to enhance our understanding of the robots behaviour as well as enables us to more quickly verify and optimize new ideas.
In our search for a simulation framework to base our robotic research on, we found a variety of robot simulation platforms, such as Gazebo, V-REP, Webots or MuJoCo. 
Each of these simulators has its own strengths and features that researchers have utilized to explore different aspects of robotics \parencite{de2019analysis, collins2021review}.
Besides these tools explicitly developed for robot simulations, there exist other modelling and simulation environments which serve a wider field of applications.
One example of these is \textit{MATLAB Simulink\textsuperscript{\textregistered}}, a graphical programming environment used for modelling, simulation and analysis of complex, dynamic systems \parencite{Simulink}.
In recent years, several scientific papers have been published dealing with the simulation of hexapod robots in Simulink (see e.g. \cite{tanaka2019development, barai2013smart, atify2019propelling}).
However, to our knowledge, there is currently no publicly available, up-to-date Simulink-based hexapod model on which further research could build on.
%Simulink's diagram-like interface and extensive library of "toolboxes" facilitate the creation of modular and well-organized systems, which can also be immediately simulated.
Considering the widespread use of Simulink in both research and industry along with its extensive libraries addressing various domains, we have chosen it as our preferred development platform.
%When trying to break down the complex dynamics of such a system, the creation of a virtual model can present numerous advantages. 
%Attempting to break down the complex dynamics of such a system necessitates the use of virtual models and simulations.

Given the reasons outlined above, our main goal in this thesis is to develop a comprehensive virtual model of a hexapod robot using the MATLAB Simulink\textsuperscript{\textregistered} environment.
We aim for the model to serve as a foundation for future research to build on, therefore necessitating modularity and easy expandability.
It is essential that the created model interacts with the simulated surrounding in a physically correct way, giving us a testbed as close to reality as possible.
Additionally, accessible means to observe and analyse the robots behaviour are provided.
This includes the capability to extract and evaluate data from the simulation, enabling us to gain valuable insights into the systems performance.
Furthermore, the integration with the MATLAB software framework opens up possibilities to incorporate learning algorithms into the model.
Utilizing these, we will be able to optimize various aspects of the robotic system. 
This includes fine-tuning of control algorithms using Reinforcement Learning, enabling the robot to autonomously learn efficient leg movements and develop coordination strategies.

The developed model is validated with a self-implemented locomotion controller, that allows the movement of the robot within its virtual environment.
In addition, we aim to enable the robot to autonomously learn an efficient leg coordination strategy with the application of Reinforcement Learning.
To prove its functionality, the controller has to be able to control the robot smoothly and reliably while maintaining its overall balance.
The model also has to show the capability of performing several different gait patterns and speeds as well as the ability of omnidirectional movement.


%\section{Ziel}
%Das von uns im Rahmen dieser Bachelorarbeit angestrebte Ziel ist es, die Möglichkeiten von MATLAB Simulink zur Modellierung und Simulation komplexer dynamischer Systeme zu nutzen, um ein Modell eines Hexapod-Roboters sowie dessen Steuerung zu entwickeln.
%Wir wollen mit den Ergebnissen dieser Arbeit die Vorteile eines durch Simulink gestützten Entwicklungsprozesses hervorheben und Impulse für eine ausgiebigere Nutzung derartiger Software setzen.

%Das Modell muss die kinematischen Eigenschaften des Roboters und der Umgebung in welcher er sich bewegt berücksichtigen.
%Es soll eine realistische Simulation des Roboterverhaltens ermöglichen und dabei Informationen bezüglich der Positionierung des Modells bereitstellen.
%Diese Daten sind entscheidend für die Steuerung des Roboters und müssen für den Controller jederzeit zur Verfügung stehen.
%Der Bewegungscontroller des Hexapods sollte in der Lage sein, den Roboter zuverlässig und präzise zu steuern.
%Dies beinhaltet die Bewegung des einzelnen Beins, die Koordination der Beine untereinander sowie die Gleichgewichtserhaltung des Gesamtsystems.
%Die entwickelte Lösung soll den Roboter in verschiedenen Gangarten geradlinig in der Simulationsumgebung bewegen und auch kleine Hindernisse überwinden können, ohne dass das System aus dem Gleichgewicht gebracht wird.
%Dabei darf die Steuerung nur auf vom Modell bereitgestellte Daten zugreifen, wie dies auch bei einem realen Roboter mittels Sensoren der Fall wäre.
%Es sollte außerdem möglich sein, Module des Bewegungscontrollers anpassen zu können oder Eigenschaften des Modells abzuändern, ohne das gesamte System neu konfigurieren zu müssen.
%Nachdem ein robustes Modell und ein zuverlässiger Controller entwickelt wurden liegt der Fokus darauf, es dem Roboter mit Hilfe von maschinellem Lernen zu ermöglichen, die Koordination der Beine selbständig zu erlernen.
%Es wäre besonders interessant festzustellen, ob schon bekannte Gangarten erkennbar werden oder ganz neue Formen der Bewegung entstehen.


\todo{Check for passive formulations --> change to active}
\todo{Include Sanandos model ?}

\section{Proposed Solution}
%THIS SECTION WAS TRNSFERED FROM "OBJECTIVE"

%The model must take into account the kinematic properties of the robot and the environment in which it moves.
%It should allow a realistic simulation of the robot's behavior while providing information regarding the positioning of the model.
%This data is critical for controlling the robot and must be available to the controller at all times.
%The motion controller of the Hexapod should be able to control the robot reliably and precisely.
%This includes the movement of the individual leg, the coordination of the legs with each other, and the balance maintenance of the overall system.
%The developed solution should be able to move the robot in different gaits in a straight line in the simulation environment and also overcome small obstacles without unbalancing the system.
%In doing so, the controller must only access data provided by the model, as would be the case with a real robot using sensors.
%It should also be possible to adjust modules of the motion controller or change properties of the model without having to reconfigure the entire system.
%After a robust model and a reliable controller have been developed, the focus is on using machine learning to enable the robot to learn leg coordination on its own.
%It would be particularly interesting to determine if already familiar gaits become recognizable or if entirely new forms of movement emerge.
Our key ideas are threefold: First, we construct a virtual model of a hexapod robot with the help of MATLAB's Simulink environment.
Second, we develop a simple locomotion controller capable of performing different gaits at movement speeds.
Third, we use a Reinforcement Learning (RL) approach to learn the coordination rules of the hexapod's legs from the ground up.

The majority of work in this thesis is supported by the \textit{MATLAB\textsuperscript{\textregistered}} software framework and the MATLAB-based \textit{Simulink\textsuperscript{\textregistered}} environment, both provided and developed by the company \textit{MathWorks\textsuperscript{\textregistered}}.
%MATLAB supports the development of the hexapod model as well
We utilize Simulink, a graphical block diagramming tool, to allow for a modular and visually clear development process.
We construct a detailed, physically correct model of the hexapod using Simulink's Toolbox \textit{Simscape\textsuperscript{\texttrademark}}, taking the \emph{PhantomX} hexapod developed by \emph{Trossen Robotics} as a template.
The model is parametrised as well as possible, so that properties like weight, friction coefficients or max. applied torques of the individual components can be easily adjusted later on.
Each of the models actuators is individually addressable and provides sensor data regarding position and acceleration.
Additionally, a test environment is constructed in which the robot model is extensively tested during the further development process.

As with the hexapod model, we implement the locomotion controller in Simulink, development being divided into three separate steps:
Initially, our attention lies on enabling precise movement of the individual hexapod legs.
Subsequently, we develop a method of generating continuous leg trajectories which the legs are instructed to follow.
Concluding the development of the locomotion controller, we combine the individual leg movements into several static gait patterns, namely tripod, tetrapod and wave gait, enabling coordinated walking.

Based on the preliminary work done on the model and different gaits, we use a reinforcement learning (RL) approach to enable the hexapod to learn the coordination of its legs.
This learning process is also realized within the Simulink environment utilizing the \textit{Reinforcement Learning} toolbox.
In contrast to the gaits generated so far, only the motion sequence of the individual leg remains fixed, while the coordination among them is learned by interaction of the model with its environment. 
This approach of keeping the individual legs motion predefined makes it possible to initially reduce the complexity of the skills to be learned, but at the same time leaves open the possibility of including additional elements into the learning process.

%\section{Lösungsansatz}
%Die Grundlage der Arbeit liefert die in der Forschung und Industrie weit verbreite Software \textit{MATLAB\textregistered} und die enthaltene \textit{Simulink}\textregistered-Umgebung des Unternehmens \textit{MathWorks}.
%Simulink bietet eine auf funktionalen Blöcken basierende Modellierungsmethode, welche einen sehr modularen und visuell übersichtlichen Entwicklungsprozess ermöglicht.
%Durch eine Vielzahl von sogenannten "Toolboxes" können Modelle aus den verschiedensten Anwendungsgebieten erschaffen werden.
%
%Zu Beginn der Arbeit wird ein detailliertes, physikalisch korrektes Modell des Hexapods mithilfe der Simulink-Toolbox Simscape entwickelt, als Vorlage dient hier der \emph{PhantomX}-Hexapod von \emph{Trossen Robotics}.
%Jedes der 6 Beine besteht aus 3 Gelenken mit je einem Aktuator, eine Architektur welche weit verbreitet ist und sich bewährt hat.
%Das Modell sollte möglichst gut parametrisiert werden, damit Eigenschaften wie Gewicht, Reibungskoeffizienten, Drehmomente, etc. der einzelnen Komponenten auch im nach hinein noch einfach angepasst werden können.
%Jeder der Aktuatoren muss einzeln ansprechbar sein und die Gelenke müssen Sensordaten bezüglich ihrer Position (und Beschleunigung) liefern.
%Diese Daten informieren den im nächsten Schritt zu implementierenden Controller über die Lage (und Dynamik) des Roboters.
%Neben dem eigentlichen Modell des Hexapods wird zusätzlich noch eine einfache Testumgebung erbaut, in welcher das Robotermodell im weiteren Entwicklungsprozess ausgiebig getestet werden kann.
%
%Nachdem die Entwicklung des SimScape-Modells abgeschlossen ist, wird mit der Implementierung einer kontrollierten Steuerung des Roboters in Simulink begonnen.
%Der Fokus liegt dabei zunächst auf der Beschreibung des Bewegungsablaufs eines einzelnen Beins.
%Sobald dieser Ablauf, bestehend aus Schwung- und Standphase, zuverlässig funktioniert, wird er auf alle 6 Beine ausgeweitet.
%Hierbei spielt die Koordination der Beine eine entscheidende Rolle, unabhängig davon, ob diese zentral oder verteilt ausgelegt wird.
%Grundlegend ist es natürlich auch, dass der Roboter das Gleichgewicht hält und robust gegenüber Störungen im Bewegungsablauf ist.
%Um das SimScape-Modell ausgiebig zu testen, ist es möglich, mehrere verschiedene Gangarten wie den Tripod-, Tetrapod- und Wave-Gait abzubilden.
%%evt. könnte auch eine dezentrale Architektur wie z.B. die von Schilling et al. abgebildet werden (?).
%
%Basierend auf den Vorarbeiten zur Modellierung und den verschiedenen Gangarten soll anschließend die Koordination der Beine mithilfe eines Reinforcement Learning-Modells selbst erlernt werden.
%Dieser Lernprozess wird ebenfalls innerhalb der Simulink-Umgebung durch die RL-Toolbox realisiert.
%Im Gegensatz zu den bisher erzeugten Gangarten wird hier nicht vorgegeben werden, welche Beine ihren Bewegung zu welchem Zeitpunkt ausführen sollen.
%Der Bewegungsablauf des einzelnen Beins bleibt fest definiert, während die Koordination untereinander durch Interaktion des Modells mit der Umgebung erlernt werden soll. 
%Diese Herangehensweise ermöglicht es die Komplexität der zu erlernenden Fähigkeiten zunächst zu reduzieren, lässt aber gleichzeitig die Möglichkeit offen, im weiteren Verlauf zusätzliche Elemente in den Lernprozess einzubeziehen.

\section{Structure}
The outline of the remaining contents in this thesis is as follows:
Chapter [\ref{ch:background}]  introduces essential concepts and techniques required to understand our work, followed by an exploration of existing research papers concerned with closely related problems in chapter \ref{ch:relatedWorks}.
We continue with a detailed explanation of the developed hexapod model and controller in chapter [\ref{ch:methods}], as well as a description of the reinforcement learning setup used for training the robot on leg coordination.
Finally, in chapter [\ref{ch:results}] we evaluate the created model and present the results from the reinforcement learning process.
We conclude our work with suggestions towards possible future expansions to the model and more broadly towards points of potential future research interest in chapter \ref{ch:conclusion}.